
{% extends "base.html" %}
{% load staticfiles %}
{% load filters %}
{% block script %}

{% endblock %}
{% block content %}


<!-- Page Content -->

<div class="container" >
    <form method="get">
        <div class="row">
            {% if request.user|has_group:"MiembroGTI" or request.user|has_group:"ConectaTE" %}
            <div class="form-group col-3" id="sel_categoria">
                <label for="categorias"><b>Categorias</b></label>
                    <select id="categorias" class="form-control" name="categoria">
                        <option value="">Todas las categorias</option>
                    </select>
            </div>
           {% endif %}
            <div class="form-group col-3" id="sel_sistema_operativo">
                <label for="sistema_operativo"><b>Sistema operativo</b></label>
                <input type="text" name="sistema_operativo" id="sistema_operativo" class="form-control" placeholder="Ejemplo: Windows">
            </div>
            <div class="form-group col-3" id="sel_tipo_licencia">
                <label for="tipo_licencia"><b>Tipo de licencia</b></label>
                    <input type="text" name="tipo_licencia" id="tipo_licencia" class="form-control" placeholder="Ejemplo: Open source">

            </div>
            <div class ="form-group col-3" style="padding-top: 2%">
                <button id="btnFiltrar" type="submit" class="btn btn-default" style="height: 40px;">Filtrar</button>
            </div>
        </div>
    </form>
</div>
<div class="container">

    <div id="herramientas" class="row">

        {% for currentHerramienta in lista_herramientas %}
            <div class="col-sm-4 py-2">
              <div class="card" style="height: 235px;">
                  <div id="herramienta_{{ currentHerramienta.id }}_nombre" class="card-header text-center"><a href="{% url 'tool_detail' currentHerramienta.id %}"> {{ currentHerramienta.nombre }}</a></div>
                  <div class="card-body" >
                    <h6>{{ currentHerramienta.tipo }}</h6>
                    <hr />
                    <p class="card-text">{{ currentHerramienta.descripcion|slice:"160" }}{% if currentHerramienta.descripcion|length > 160 %}...{% endif %}</p>
                  </div>
              </div>
            </div>
        {% endfor %}

    </div>
    <!-- /.row -->

    <div id="carouselExampleIndicators" class="carousel slide my-4" data-ride="carousel">
    </div>

</div>
<!-- /.container -->

<script>
$( document ).ready(function() {
    $.getJSON('/herramientas/api/categorias/').done(function (data) {
        $.each(data, function (i, item) {
            $("#categorias").append(
                '<option value="' + item.pk + '">' + item.fields.nombre + '</option>'
            );
        })
    })
});
</script>

{% endblock %}
